"use strict";(self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[]).push([[416],{3416:function(e,r,t){t.r(r),t.d(r,{default:function(){return F}});var n=t(6252);const c={class:"page-title"},s=(0,n._)("h3",null,"Счет",-1),l=(0,n._)("i",{class:"material-icons"},"refresh",-1),a=[l],u={key:1,class:"row"};function i(e,r,t,l,i,o){const d=(0,n.up)("Loader"),h=(0,n.up)("HomeBill"),y=(0,n.up)("HomeCurrency");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",c,[s,(0,n._)("button",{onClick:r[0]||(r[0]=(...e)=>o.refresh&&o.refresh(...e)),class:"btn waves-effect waves-light btn-small"},a)]),i.loading?((0,n.wg)(),(0,n.j4)(d,{key:0})):((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(h,{rate:i.currency.results},null,8,["rate"]),(0,n.Wm)(y,{rate:i.currency.results,date:i.currency.updated},null,8,["rate","date"])]))])}var o=t(3577);const d={class:"col s12 m6 l4"},h={key:1,class:"card light-blue bill-card"},y={class:"card-content white-text"},w=(0,n._)("span",{class:"card-title"},"Счет в валюте",-1);function g(e,r,t,c,s,l){const a=(0,n.up)("Loader");return(0,n.wg)(),(0,n.iD)("div",d,[this.base?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",y,[w,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.currencies,(e=>((0,n.wg)(),(0,n.iD)("p",{class:"currency-line",key:e},[(0,n._)("span",null,(0,o.zw)(l.currencyFilter(l.getCurrency(e),e)),1)])))),128))])])):((0,n.wg)(),(0,n.j4)(a,{key:0}))])}var m=t(3144),_={props:["rate"],components:{Loader:m.Z},data(){return{loader:!0,currencies:["USD","RUB","UZS"]}},computed:{base(){return this.$store.getters.info.bill/(this.rate["RUB"]/this.rate["USD"])}},methods:{getCurrency(e){return Math.floor(this.base*this.rate[e])},currencyFilter(e,r="EUR"){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:r}).format(e)}}},p=t(3744);const v=(0,p.Z)(_,[["render",g]]);var f=v;const b={class:"col s12 m6 l8"},k={class:"card orange darken-3 bill-card"},D={class:"card-content white-text"},U=(0,n._)("div",{class:"card-header"},[(0,n._)("span",{class:"card-title"},"Курс валют")],-1),C=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Валюта"),(0,n._)("th",null,"Курс"),(0,n._)("th",null,"Дата")])],-1);function H(e,r,t,c,s,l){return(0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("div",k,[(0,n._)("div",D,[U,(0,n._)("table",null,[C,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.currencies,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,(0,o.zw)(e),1),(0,n._)("td",null,(0,o.zw)(t.rate[e].toFixed(2)),1),(0,n._)("td",null,(0,o.zw)(t.date.slice(0,10)),1)])))),128))])])])])])}var Z={props:["rate","date"],data(){return{currencies:["USD","RUB","UZS"]}}};const B=(0,p.Z)(Z,[["render",H]]);var R=B,S={name:"Home",data(){return{loading:!0,currency:null}},components:{HomeBill:f,HomeCurrency:R,Loader:m.Z},async mounted(){this.currency=await this.$store.dispatch("fetchCurrency"),console.log(this.currency),this.loading=!1},methods:{async refresh(){this.loading=!0,this.currency=await this.$store.dispatch("fetchCurrency"),this.loading=!1}}};const z=(0,p.Z)(S,[["render",i]]);var F=z}}]);
//# sourceMappingURL=416.86290e88.js.map